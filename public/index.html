<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <title>ÌÉÄÎ°ú ÌÉÄÏù¥Î®∏ - Ïã†ÎπÑÎ°úÏö¥ ÌÉÄÎ°ú ÌÉÄÏù¥Î®∏</title>
    <meta name="description" content="üîÆ Í∞úÏù∏ ÎßûÏ∂§Ìòï ÌÉÄÎ°ú Î¶¨Îî©ÏúºÎ°ú ÏùòÎØ∏ÏûàÎäî ÌïòÎ£®Î•º ÏãúÏûëÌïòÏÑ∏Ïöî. ÏºàÌã± ÌÅ¨Î°úÏä§, Ïªµ Ïò§Î∏å Î¶¥Î†àÏù¥ÏÖòÏã≠, AB ÏÑ†ÌÉù Îì± Îã§ÏñëÌïú Ïä§ÌîÑÎ†àÎìúÏôÄ ÏùºÍ∏∞ Í∏∞Îä•ÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.">
    <meta name="keywords" content="ÌÉÄÎ°ú, ÌÉÄÎ°úÏπ¥Îìú, ÌÉÄÏù¥Î®∏, Î™ÖÏÉÅ, Ï†êÏà†, tarot, tarot cards, timer, meditation">
    
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/icon.svg">
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <!-- Critical CSS -->
    <style>
        :root {
            /* Mystical Color Palette */
            --primary: #7c3aed;
            --primary-dark: #5b21b6;
            --primary-light: #a855f7;
            --secondary: #f59e0b;
            --secondary-dark: #d97706;
            --accent: #10b981;
            --accent-dark: #059669;
            
            /* Background Colors */
            --bg-primary: #0f0f23;
            --bg-secondary: #1a1a2e;
            --bg-tertiary: #16213e;
            --bg-surface: rgba(124, 58, 237, 0.1);
            --bg-overlay: rgba(0, 0, 0, 0.8);
            
            /* Text Colors */
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --text-accent: #fbbf24;
            
            /* Border & Shadow */
            --border-primary: rgba(124, 58, 237, 0.2);
            --border-secondary: rgba(255, 255, 255, 0.1);
            --shadow-glow: 0 0 20px rgba(124, 58, 237, 0.3);
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            
            /* Typography */
            --font-heading: 'Crimson Text', serif;
            --font-body: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-body);
            background: linear-gradient(135deg, 
                #0f0f23 0%, 
                #1a1a2e 25%, 
                #16213e 50%, 
                #1a1a2e 75%, 
                #0f0f23 100%
            );
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(168, 85, 247, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 70%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        #app {
            max-width: 428px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            z-index: 1;
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 0 40px rgba(124, 58, 237, 0.15);
        }

        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            gap: var(--space-lg);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(124, 58, 237, 0.2);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden { display: none; }
    </style>
</head>
<body>
    <div id="app">
        <div class="loading">
            <div class="loading-spinner"></div>
            <div>Î°úÎî© Ï§ë...</div>
        </div>
    </div>

    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Main Application -->
    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo, createContext, useContext } = React;

        // ==========================================
        // TAROT DATA - Complete 78 card deck with Korean translations
        // ==========================================
        
        const FULL_TAROT_DECK = [
            // Major Arcana
            {
                id: 'fool',
                name: 'The Fool',
                nameKr: 'Î∞îÎ≥¥',
                suit: 'major',
                number: 0,
                imageUrl: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=500&fit=crop',
                keywords: ['new beginnings', 'innocence', 'spontaneity'],
                keywordsKr: ['ÏÉàÎ°úÏö¥ ÏãúÏûë', 'ÏàúÏàòÌï®', 'ÏûêÎ∞úÏÑ±'],
                meaning: 'New beginnings, having faith in the future, being inexperienced, not knowing what to expect.',
                meaningKr: 'ÏÉàÎ°úÏö¥ ÏãúÏûë, ÎØ∏ÎûòÏóê ÎåÄÌïú ÎØøÏùå, Í≤ΩÌóò Î∂ÄÏ°±, Î¨¥ÏóáÏùÑ Í∏∞ÎåÄÌï¥Ïïº Ìï†ÏßÄ Î™®Î¶Ñ.',
                reversed: 'Recklessness, taken advantage of, inconsideration, stupidity.',
                reversedKr: 'Î¨¥Î™®Ìï®, Ïù¥Ïö©ÎãπÌï®, Î∞∞Î†§ Î∂ÄÏ°±, Ïñ¥Î¶¨ÏÑùÏùå.',
                emoji: 'üÉè'
            },
            {
                id: 'magician',
                name: 'The Magician',
                nameKr: 'ÎßàÎ≤ïÏÇ¨',
                suit: 'major',
                number: 1,
                imageUrl: 'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=300&h=500&fit=crop',
                keywords: ['manifestation', 'resourcefulness', 'power'],
                keywordsKr: ['ÌòÑÏã§Ìôî', 'ÏàòÏôÑ', 'Ìûò'],
                meaning: 'Having the tools and resources you need to accomplish your goals.',
                meaningKr: 'Î™©ÌëúÎ•º Îã¨ÏÑ±ÌïòÎäî Îç∞ ÌïÑÏöîÌïú ÎèÑÍµ¨ÏôÄ ÏûêÏõêÏùÑ Í∞ñÍ≥† ÏûàÏùå.',
                reversed: 'Manipulation, poor planning, untapped talents.',
                reversedKr: 'Ï°∞Ïûë, Ïó¥ÏïÖÌïú Í≥ÑÌöç, Í∞úÎ∞úÎêòÏßÄ ÏïäÏùÄ Ïû¨Îä•.',
                emoji: 'üé©'
            },
            {
                id: 'high-priestess',
                name: 'The High Priestess',
                nameKr: 'Ïó¨ÍµêÌô©',
                suit: 'major',
                number: 2,
                imageUrl: 'https://images.unsplash.com/photo-1551731409-43eb3e517a1a?w=300&h=500&fit=crop',
                keywords: ['intuition', 'sacred knowledge', 'divine feminine'],
                keywordsKr: ['ÏßÅÍ∞ê', 'Ïã†ÏÑ±Ìïú ÏßÄÏãù', 'Ïã†ÏÑ±Ìïú Ïó¨ÏÑ±ÏÑ±'],
                meaning: 'Intuition, higher powers, mystery, subconscious mind.',
                meaningKr: 'ÏßÅÍ¥Ä, Í≥†Ï∞®ÏõêÏùò Ìûò, Ïã†ÎπÑ, Ïû†Ïû¨ÏùòÏãù.',
                reversed: 'Lack of center, lost inner voice, repressed feelings.',
                reversedKr: 'Ï§ëÏã¨ Î∂ÄÏ°±, ÏûÉÏñ¥Î≤ÑÎ¶∞ ÎÇ¥Î©¥Ïùò Î™©ÏÜåÎ¶¨, ÏñµÏïïÎêú Í∞êÏ†ï.',
                emoji: 'üîÆ'
            },
            // Add more Major Arcana cards (3-21)
            {
                id: 'world',
                name: 'The World',
                nameKr: 'ÏÑ∏Í≥Ñ',
                suit: 'major',
                number: 21,
                imageUrl: 'https://images.unsplash.com/photo-1573167243872-43c6433b9d40?w=300&h=500&fit=crop',
                keywords: ['completion', 'accomplishment', 'travel'],
                keywordsKr: ['ÏôÑÏÑ±', 'ÏÑ±Ï∑®', 'Ïó¨Ìñâ'],
                meaning: 'Completion, accomplishment, travel, fulfillment.',
                meaningKr: 'ÏôÑÏÑ±, ÏÑ±Ï∑®, Ïó¨Ìñâ, ÏÑ±Ï∑®Í∞ê.',
                reversed: 'Seeking personal closure, stagnation, lack of achievement.',
                reversedKr: 'Í∞úÏù∏Ï†Å ÎßàÎ¨¥Î¶¨ Ï∂îÍµ¨, Ï†ïÏ≤¥, ÏÑ±Ï∑® Î∂ÄÏ°±.',
                emoji: 'üåç'
            }
        ];
        
        // Generate Minor Arcana (for demo, just a few cards)
        const generateMinorArcana = () => {
            const suits = [
                { name: 'cups', nameKr: 'Ïªµ', emoji: 'üè∫' },
                { name: 'pentacles', nameKr: 'ÌéúÌÉÄÌÅ¥', emoji: '‚≠ê' },
                { name: 'swords', nameKr: 'Í≤Ä', emoji: '‚öîÔ∏è' },
                { name: 'wands', nameKr: 'ÏßÄÌå°Ïù¥', emoji: 'ü™Ñ' }
            ];
            
            const cards = [];
            suits.forEach(suit => {
                for (let i = 1; i <= 10; i++) {
                    cards.push({
                        id: `${suit.name}-${i}`,
                        name: `${i} of ${suit.name.charAt(0).toUpperCase() + suit.name.slice(1)}`,
                        nameKr: `${suit.nameKr} ${i}`,
                        suit: suit.name,
                        number: i,
                        imageUrl: 'https://images.unsplash.com/photo-1628860948883-05389e02adf6?w=300&h=500&fit=crop',
                        keywords: ['energy', 'movement', 'progress'],
                        keywordsKr: ['ÏóêÎÑàÏßÄ', 'ÏõÄÏßÅÏûÑ', 'ÏßÑÎ≥¥'],
                        meaning: `The ${i} of ${suit.name} represents progress in the realm of ${suit.name}.`,
                        meaningKr: `${suit.nameKr} ${i}ÏùÄ ${suit.nameKr} ÏòÅÏó≠ÏóêÏÑúÏùò ÏßÑÎ≥¥Î•º ÎÇòÌÉÄÎÉÖÎãàÎã§.`,
                        reversed: 'Blocked energy, delays, frustration.',
                        reversedKr: 'ÎßâÌûå ÏóêÎÑàÏßÄ, ÏßÄÏó∞, Ï¢åÏ†à.',
                        emoji: suit.emoji
                    });
                }
            });
            return cards;
        };
        
        const COMPLETE_DECK = [...FULL_TAROT_DECK, ...generateMinorArcana()];
        
        // Spread Types with detailed configurations
        const SPREAD_TYPES = [
            {
                id: 'three-card',
                name: 'Three Card Spread',
                nameKr: '3Ïπ¥Îìú',
                description: 'Past, Present, Future',
                descriptionKr: 'Í≥ºÍ±∞, ÌòÑÏû¨, ÎØ∏Îûò',
                positions: ['Past', 'Present', 'Future'],
                positionsKr: ['Í≥ºÍ±∞', 'ÌòÑÏû¨', 'ÎØ∏Îûò'],
                isPremium: false
            },
            {
                id: 'five-card',
                name: 'Five Card V-Shape',
                nameKr: '5Ïπ¥Îìú',
                description: 'V-shaped spread for comprehensive guidance',
                descriptionKr: 'VÏûê ÌòïÌÉúÎ°ú Î≥¥Îäî Ï¢ÖÌï©Ï†ÅÏù∏ ÏïàÎÇ¥',
                positions: ['Foundation', 'Challenge', 'Strength', 'Advice', 'Outcome'],
                positionsKr: ['Í∏∞Î∞ò', 'ÎèÑÏ†Ñ', 'Ìûò', 'Ï°∞Ïñ∏', 'Í≤∞Í≥º'],
                isPremium: false
            },
            {
                id: 'celtic-cross',
                name: 'Celtic Cross',
                nameKr: 'ÏºàÌã± ÌÅ¨Î°úÏä§',
                description: 'Complete life reading with 10 cards',
                descriptionKr: '10Ïû•ÏúºÎ°ú Î≥¥Îäî ÏôÑÏ†ÑÌïú Ïù∏ÏÉù Î¶¨Îî©',
                positions: ['Current Situation', 'Challenge', 'Distant Past', 'Recent Past', 'Possible Outcome', 'Immediate Future', 'Your Approach', 'External Influences', 'Hopes and Fears', 'Final Outcome'],
                positionsKr: ['ÌòÑÏû¨ ÏÉÅÌô©', 'ÎèÑÏ†Ñ', 'Î®º Í≥ºÍ±∞', 'ÏµúÍ∑º Í≥ºÍ±∞', 'Í∞ÄÎä•Ìïú Í≤∞Í≥º', 'Í∞ÄÍπåÏö¥ ÎØ∏Îûò', 'ÎãπÏã†Ïùò Ï†ëÍ∑ºÎ≤ï', 'Ïô∏Î∂Ä ÏòÅÌñ•', 'Ìù¨ÎßùÍ≥º ÎëêÎ†§ÏõÄ', 'ÏµúÏ¢Ö Í≤∞Í≥º'],
                isPremium: true
            },
            {
                id: 'love',
                name: 'Cup of Relationship',
                nameKr: 'Ïªµ Ïò§Î∏å Î¶¥Î†àÏù¥ÏÖòÏã≠',
                description: 'Deep insights into your relationship dynamics with 11 cards',
                descriptionKr: '11Ïû•Ïùò Ïπ¥ÎìúÎ°ú Î≥¥Îäî ÍπäÏùÄ Í¥ÄÍ≥Ñ Ïó≠Ìïô ÌÜµÏ∞∞',
                positions: [
                    'Your Current State',
                    'Partner\'s Current State', 
                    'Our Current State',
                    'Past',
                    'Present',
                    'Obstacles',
                    'Your Heart',
                    'Partner\'s Heart',
                    'What You Want from Partner',
                    'What Partner Wants from You',
                    'Outcome'
                ],
                positionsKr: [
                    'ÎÇòÏùò ÌòÑÏû¨ ÏÉÅÌÉú',
                    'ÏÉÅÎåÄÏùò ÌòÑÏû¨ ÏÉÅÌÉú',
                    'Ïö∞Î¶¨Ïùò ÌòÑÏû¨ ÏÉÅÌÉú', 
                    'Í≥ºÍ±∞',
                    'ÌòÑÏû¨',
                    'Î∞©Ìï¥Î¨º',
                    'ÎÇòÏùò ÎßàÏùå',
                    'ÏÉÅÎåÄÏùò ÎßàÏùå',
                    'ÎÇ¥Í∞Ä ÏÉÅÎåÄÏóêÍ≤å Î∞îÎùºÎäî Ï†ê',
                    'ÏÉÅÎåÄÍ∞Ä ÎÇòÏóêÍ≤å Î∞îÎùºÎäî Ï†ê',
                    'Í≤∞Í≥º'
                ],
                isPremium: true
            },
            {
                id: 'career',
                name: 'AB Choice Tarot',
                nameKr: 'AB ÏÑ†ÌÉù ÌÉÄÎ°ú',
                description: 'Choose between two important options with 7 cards',
                descriptionKr: '7Ïû•Ïùò Ïπ¥ÎìúÎ°ú Î≥¥Îäî Îëê Í∞ÄÏßÄ ÏÑ†ÌÉùÏßÄ Î∂ÑÏÑù',
                positions: [
                    'Choice A Option 1',
                    'Choice A Option 2', 
                    'Choice A Option 3',
                    'Current Situation',
                    'Choice B Option 1',
                    'Choice B Option 2',
                    'Choice B Option 3'
                ],
                positionsKr: [
                    'A ÏÑ†ÌÉùÏßÄ 1',
                    'A ÏÑ†ÌÉùÏßÄ 2',
                    'A ÏÑ†ÌÉùÏßÄ 3',
                    'ÌòÑÏû¨ ÏÉÅÌô©',
                    'B ÏÑ†ÌÉùÏßÄ 1',
                    'B ÏÑ†ÌÉùÏßÄ 2',
                    'B ÏÑ†ÌÉùÏßÄ 3'
                ],
                isPremium: true
            }
        ];
        
        // ==========================================
        // UTILITY FUNCTIONS
        // ==========================================
        
        const generateDailyCards = (date = new Date()) => {
            const seed = date.getTime().toString();
            const random = (seed, index) => {
                let hash = 0;
                const str = seed + index.toString();
                for (let i = 0; i < str.length; i++) {
                    const char = str.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                return Math.abs(hash);
            };
            
            const availableCards = [...COMPLETE_DECK];
            const cards = [];
            
            for (let hour = 0; hour < 24; hour++) {
                if (availableCards.length === 0) break;
                const randomValue = random(seed, hour);
                const cardIndex = randomValue % availableCards.length;
                const selectedCard = availableCards.splice(cardIndex, 1)[0];
                if (selectedCard) cards.push(selectedCard);
            }
            
            return cards;
        };

        const getCurrentHour = () => new Date().getHours();
        const formatHour = (hour) => {
            const period = hour >= 12 ? 'Ïò§ÌõÑ' : 'Ïò§Ï†Ñ';
            const displayHour = hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;
            return `${period} ${displayHour}Ïãú`;
        };
        
        const formatDate = (date) => {
            return date.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });
        };
        
        // Local Storage Functions
        const saveDailyTarot = (dailyReading) => {
            const saved = localStorage.getItem('dailyTarotSaves');
            const savedReadings = saved ? JSON.parse(saved) : [];
            const existingIndex = savedReadings.findIndex(reading => reading.date === dailyReading.date);
            
            if (existingIndex >= 0) {
                savedReadings[existingIndex] = dailyReading;
            } else {
                savedReadings.unshift(dailyReading);
            }
            
            localStorage.setItem('dailyTarotSaves', JSON.stringify(savedReadings));
        };
        
        const loadDailyTarotSaves = () => {
            const saved = localStorage.getItem('dailyTarotSaves');
            return saved ? JSON.parse(saved) : [];
        };

        // ==========================================
        // CONTEXT & STATE MANAGEMENT
        // ==========================================
        
        const LanguageContext = createContext();
        const useLanguage = () => useContext(LanguageContext);
        
        const LanguageProvider = ({ children }) => {
            const [language, setLanguage] = useState('ko');
            const toggleLanguage = () => setLanguage(prev => prev === 'ko' ? 'en' : 'ko');
            
            return (
                <LanguageContext.Provider value={{ language, toggleLanguage }}>
                    {children}
                </LanguageContext.Provider>
            );
        };
        
        // ==========================================
        // STYLED COMPONENTS
        // ==========================================
        
        const styles = {
            app: {
                display: 'flex',
                flexDirection: 'column',
                minHeight: '100vh',
            },
            header: {
                padding: 'var(--space-xl) var(--space-lg) var(--space-lg)',
                textAlign: 'center',
                background: 'linear-gradient(135deg, rgba(124, 58, 237, 0.2) 0%, rgba(168, 85, 247, 0.1) 100%)',
                borderBottom: '1px solid var(--border-primary)',
            },
            crown: {
                fontSize: '2.5rem',
                marginBottom: 'var(--space-md)',
                filter: 'drop-shadow(0 0 10px rgba(245, 158, 11, 0.6))',
            },
            title: {
                fontFamily: 'var(--font-heading)',
                fontSize: '2.2rem',
                fontWeight: 600,
                marginBottom: 'var(--space-sm)',
                background: 'linear-gradient(135deg, var(--text-accent), var(--primary-light))',
                WebkitBackgroundClip: 'text',
                WebkitTextFillColor: 'transparent',
                backgroundClip: 'text',
            },
            subtitle: {
                color: 'var(--text-secondary)',
                fontSize: '0.95rem',
                opacity: 0.9,
            },
            content: {
                flex: 1,
                padding: 'var(--space-lg)',
                paddingBottom: '120px',
            },
            card: {
                background: 'var(--bg-surface)',
                backdropFilter: 'blur(20px)',
                borderRadius: 'var(--space-lg)',
                border: '1px solid var(--border-primary)',
                padding: 'var(--space-xl)',
                marginBottom: 'var(--space-lg)',
                boxShadow: 'var(--shadow-glow)',
            },
            primaryButton: {
                width: '100%',
                padding: 'var(--space-lg) var(--space-xl)',
                borderRadius: 'var(--space-md)',
                border: 'none',
                background: 'linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%)',
                color: 'white',
                fontSize: '1.1rem',
                fontWeight: 600,
                cursor: 'pointer',
                transition: 'all 0.3s ease',
                boxShadow: 'var(--shadow-glow)',
                marginBottom: 'var(--space-md)',
            },
            secondaryButton: {
                width: '100%',
                padding: 'var(--space-md) var(--space-lg)',
                borderRadius: 'var(--space-sm)',
                border: '1px solid var(--border-primary)',
                background: 'transparent',
                color: 'var(--text-secondary)',
                fontSize: '1rem',
                cursor: 'pointer',
                transition: 'all 0.3s ease',
                marginBottom: 'var(--space-sm)',
            },
            bottomNav: {
                position: 'fixed',
                bottom: 0,
                left: '50%',
                transform: 'translateX(-50%)',
                width: '100%',
                maxWidth: '428px',
                background: 'var(--bg-overlay)',
                backdropFilter: 'blur(20px)',
                borderTop: '1px solid var(--border-primary)',
                zIndex: 1000,
            },
            navContainer: {
                display: 'flex',
                justifyContent: 'center',
                alignItems: 'center',
                padding: 'var(--space-md)',
                gap: 'var(--space-md)',
            },
            navItem: {
                display: 'flex',
                flexDirection: 'column',
                alignItems: 'center',
                gap: 'var(--space-xs)',
                padding: 'var(--space-sm) var(--space-md)',
                borderRadius: 'var(--space-md)',
                cursor: 'pointer',
                transition: 'all 0.3s ease',
                background: 'transparent',
                border: 'none',
                color: 'var(--text-muted)',
                fontSize: '0.75rem',
                fontWeight: 500,
                minWidth: '60px',
            },
            activeNav: {
                color: 'var(--primary-light)',
                background: 'rgba(124, 58, 237, 0.2)',
                boxShadow: 'var(--shadow-glow)',
            },
            navIcon: {
                fontSize: '1.5rem',
            },
        };

        // ==========================================
        // COMPONENTS
        // ==========================================
        
        // Timer Screen Component
        const TimerScreen = () => {
            const [currentTime, setCurrentTime] = useState(new Date());
            const [dailyCards, setDailyCards] = useState([]);
            const [currentHour, setCurrentHour] = useState(getCurrentHour());
            const [memos, setMemos] = useState({});
            const [insights, setInsights] = useState('');
            
            const { language } = useLanguage();
            
            useEffect(() => {
                const timer = setInterval(() => {
                    const now = new Date();
                    setCurrentTime(now);
                    setCurrentHour(getCurrentHour());
                }, 1000);
                
                return () => clearInterval(timer);
            }, []);
            
            useEffect(() => {
                const cards = generateDailyCards();
                setDailyCards(cards);
                
                // Load saved data for today
                const today = new Date().toDateString();
                const savedData = loadDailyTarotSaves().find(save => save.date === today);
                if (savedData) {
                    setMemos(savedData.memos || {});
                    setInsights(savedData.insights || '');
                }
            }, []);
            
            const currentCard = dailyCards[currentHour] || null;
            
            const saveMemo = (hour, memo) => {
                const newMemos = { ...memos, [hour]: memo };
                setMemos(newMemos);
                
                // Auto-save to localStorage
                const dailyReading = {
                    id: new Date().toDateString(),
                    date: new Date().toDateString(),
                    hourlyCards: dailyCards,
                    memos: newMemos,
                    insights,
                    savedAt: new Date().toISOString()
                };
                saveDailyTarot(dailyReading);
            };
            
            return (
                <div style={styles.content}>
                    <div style={styles.card}>
                        <div style={{ textAlign: 'center', marginBottom: 'var(--space-lg)' }}>
                            <div style={{ fontSize: '3rem', marginBottom: 'var(--space-md)' }}>
                                {currentCard?.emoji || 'üîÆ'}
                            </div>
                            <h2 style={{ fontSize: '1.5rem', marginBottom: 'var(--space-sm)', color: 'var(--text-primary)' }}>
                                {formatHour(currentHour)}Ïùò Ïπ¥Îìú
                            </h2>
                            {currentCard && (
                                <>
                                    <h3 style={{ fontSize: '1.2rem', color: 'var(--text-accent)', marginBottom: 'var(--space-sm)' }}>
                                        {currentCard.nameKr}
                                    </h3>
                                    <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem', lineHeight: 1.5 }}>
                                        {currentCard.meaningKr}
                                    </p>
                                </>
                            )}
                        </div>
                        
                        <div style={{ fontSize: '1.5rem', textAlign: 'center', color: 'var(--text-accent)', marginBottom: 'var(--space-md)' }}>
                            {currentTime.toLocaleTimeString('ko-KR')}
                        </div>
                        
                        {currentCard && (
                            <div>
                                <textarea
                                    placeholder={`${formatHour(currentHour)} Î©îÎ™®Î•º ÏûëÏÑ±ÌïòÏÑ∏Ïöî...`}
                                    value={memos[currentHour] || ''}
                                    onChange={(e) => saveMemo(currentHour, e.target.value)}
                                    style={{
                                        width: '100%',
                                        minHeight: '100px',
                                        padding: 'var(--space-md)',
                                        borderRadius: 'var(--space-sm)',
                                        border: '1px solid var(--border-secondary)',
                                        background: 'rgba(255, 255, 255, 0.05)',
                                        color: 'var(--text-primary)',
                                        fontSize: '0.9rem',
                                        resize: 'vertical',
                                    }}
                                />
                            </div>
                        )}
                    </div>
                    
                    {/* 24-hour card grid */}
                    <div style={{
                        display: 'grid',
                        gridTemplateColumns: 'repeat(auto-fill, minmax(80px, 1fr))',
                        gap: 'var(--space-sm)',
                        marginTop: 'var(--space-lg)',
                    }}>
                        {dailyCards.map((card, index) => (
                            <div
                                key={`${card.id}-${index}`}
                                style={{
                                    background: index === currentHour 
                                        ? 'var(--bg-surface)' 
                                        : 'rgba(255, 255, 255, 0.05)',
                                    borderRadius: 'var(--space-sm)',
                                    padding: 'var(--space-sm)',
                                    textAlign: 'center',
                                    border: index === currentHour 
                                        ? '1px solid var(--primary)' 
                                        : '1px solid var(--border-secondary)',
                                    cursor: 'pointer',
                                    transition: 'all 0.3s ease',
                                }}
                            >
                                <div style={{ fontSize: '1.5rem', marginBottom: 'var(--space-xs)' }}>
                                    {card.emoji}
                                </div>
                                <div style={{ fontSize: '0.7rem', color: 'var(--text-muted)' }}>
                                    {formatHour(index)}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Spreads Screen Component
        const SpreadsScreen = () => {
            const [selectedSpread, setSelectedSpread] = useState(null);
            const [drawnCards, setDrawnCards] = useState([]);
            const [isReading, setIsReading] = useState(false);
            const { language } = useLanguage();
            
            const drawSpread = (spread) => {
                const shuffled = [...COMPLETE_DECK].sort(() => Math.random() - 0.5);
                const cards = shuffled.slice(0, spread.positions.length).map((card, index) => ({
                    ...card,
                    position: language === 'ko' ? spread.positionsKr[index] : spread.positions[index],
                    isReversed: Math.random() < 0.3
                }));
                
                setDrawnCards(cards);
                setIsReading(true);
            };
            
            if (isReading && drawnCards.length > 0) {
                return (
                    <div style={styles.content}>
                        <div style={{ textAlign: 'center', marginBottom: 'var(--space-lg)' }}>
                            <h2 style={{ fontSize: '1.5rem', color: 'var(--text-primary)', marginBottom: 'var(--space-sm)' }}>
                                {language === 'ko' ? selectedSpread.nameKr : selectedSpread.name}
                            </h2>
                            <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem' }}>
                                {language === 'ko' ? selectedSpread.descriptionKr : selectedSpread.description}
                            </p>
                        </div>
                        
                        <div style={{
                            display: 'grid',
                            gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
                            gap: 'var(--space-md)',
                            marginBottom: 'var(--space-lg)',
                        }}>
                            {drawnCards.map((card, index) => (
                                <div key={index} style={{
                                    ...styles.card,
                                    textAlign: 'center',
                                }}>
                                    <div style={{ fontSize: '2.5rem', marginBottom: 'var(--space-sm)' }}>
                                        {card.emoji}
                                    </div>
                                    <div style={{ fontSize: '0.8rem', color: 'var(--primary)', marginBottom: 'var(--space-sm)', fontWeight: 600 }}>
                                        {card.position}
                                    </div>
                                    <h3 style={{ fontSize: '1.1rem', color: 'var(--text-primary)', marginBottom: 'var(--space-sm)' }}>
                                        {card.nameKr} {card.isReversed ? '(Ïó≠Î∞©Ìñ•)' : ''}
                                    </h3>
                                    <p style={{ fontSize: '0.9rem', color: 'var(--text-secondary)', lineHeight: 1.4 }}>
                                        {card.isReversed ? card.reversedKr : card.meaningKr}
                                    </p>
                                </div>
                            ))}
                        </div>
                        
                        <button
                            style={styles.secondaryButton}
                            onClick={() => {
                                setIsReading(false);
                                setDrawnCards([]);
                                setSelectedSpread(null);
                            }}
                        >
                            üîÑ ÏÉàÎ°úÏö¥ Ïä§ÌîÑÎ†àÎìú ÏÑ†ÌÉù
                        </button>
                    </div>
                );
            }
            
            return (
                <div style={styles.content}>
                    <div style={{ textAlign: 'center', marginBottom: 'var(--space-xl)' }}>
                        <div style={{ fontSize: '2.5rem', marginBottom: 'var(--space-md)' }}>üîÆ</div>
                        <h2 style={{ fontSize: '1.8rem', color: 'var(--text-primary)', marginBottom: 'var(--space-sm)' }}>
                            ÌÉÄÎ°ú Ïä§ÌîÑÎ†àÎìú ÏÑ†ÌÉù
                        </h2>
                        <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem' }}>
                            ÏÉÅÌô©Ïóê ÎßûÎäî Ïä§ÌîÑÎ†àÎìúÎ•º ÏÑ†ÌÉùÌïòÏó¨ ÍπäÏù¥ ÏûàÎäî Î¶¨Îî©ÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî
                        </p>
                    </div>
                    
                    <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-md)' }}>
                        {SPREAD_TYPES.map(spread => (
                            <div key={spread.id} style={{
                                ...styles.card,
                                cursor: 'pointer',
                                transition: 'all 0.3s ease',
                            }}
                                onClick={() => {
                                    setSelectedSpread(spread);
                                    drawSpread(spread);
                                }}
                            >
                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: 'var(--space-sm)' }}>
                                    <h3 style={{ fontSize: '1.2rem', color: 'var(--text-primary)' }}>
                                        {spread.nameKr}
                                    </h3>
                                    {spread.isPremium && (
                                        <span style={{
                                            background: 'linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%)',
                                            color: 'white',
                                            fontSize: '0.7rem',
                                            padding: '2px 8px',
                                            borderRadius: '12px',
                                            fontWeight: 600,
                                        }}>
                                            PREMIUM
                                        </span>
                                    )}
                                </div>
                                <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem', marginBottom: 'var(--space-md)' }}>
                                    {spread.descriptionKr}
                                </p>
                                <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>
                                    {spread.positions.length}Ïû•Ïùò Ïπ¥Îìú
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Journal Screen Component
        const JournalScreen = () => {
            const [savedReadings, setSavedReadings] = useState([]);
            
            useEffect(() => {
                setSavedReadings(loadDailyTarotSaves());
            }, []);
            
            return (
                <div style={styles.content}>
                    <div style={{ textAlign: 'center', marginBottom: 'var(--space-xl)' }}>
                        <div style={{ fontSize: '2.5rem', marginBottom: 'var(--space-md)' }}>üìö</div>
                        <h2 style={{ fontSize: '1.8rem', color: 'var(--text-primary)', marginBottom: 'var(--space-sm)' }}>
                            ÌÉÄÎ°ú ÏùºÍ∏∞
                        </h2>
                        <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem' }}>
                            ÏßÄÎÇú Î¶¨Îî© Í∏∞Î°ùÏùÑ ÌôïÏù∏ÌïòÍ≥† ÏÑ±Ï∞∞Ìï¥Î≥¥ÏÑ∏Ïöî
                        </p>
                    </div>
                    
                    {savedReadings.length === 0 ? (
                        <div style={{
                            textAlign: 'center',
                            padding: 'var(--space-2xl)',
                            color: 'var(--text-muted)',
                        }}>
                            <div style={{ fontSize: '3rem', marginBottom: 'var(--space-md)' }}>üìù</div>
                            <p>ÏïÑÏßÅ Ï†ÄÏû•Îêú Î¶¨Îî©Ïù¥ ÏóÜÏäµÎãàÎã§.</p>
                            <p>ÌÉÄÏù¥Î®∏ ÌÉ≠ÏóêÏÑú ÏùºÏùº Î¶¨Îî©ÏùÑ ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî!</p>
                        </div>
                    ) : (
                        <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-md)' }}>
                            {savedReadings.map(reading => (
                                <div key={reading.id} style={styles.card}>
                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 'var(--space-md)' }}>
                                        <h3 style={{ fontSize: '1.1rem', color: 'var(--text-primary)' }}>
                                            {formatDate(new Date(reading.date))}
                                        </h3>
                                        <span style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>
                                            {reading.hourlyCards?.length || 0}Ïû•Ïùò Ïπ¥Îìú
                                        </span>
                                    </div>
                                    
                                    {reading.insights && (
                                        <p style={{ 
                                            color: 'var(--text-secondary)', 
                                            fontSize: '0.9rem', 
                                            lineHeight: 1.4,
                                            marginBottom: 'var(--space-md)',
                                            fontStyle: 'italic',
                                        }}>
                                            "{reading.insights}"
                                        </p>
                                    )}
                                    
                                    <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>
                                        Î©îÎ™®: {Object.keys(reading.memos || {}).length}Í∞ú
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        // Settings Screen Component
        const SettingsScreen = () => {
            const { language, toggleLanguage } = useLanguage();
            
            const clearAllData = () => {
                if (confirm('Î™®Îì† Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå? Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.')) {
                    localStorage.removeItem('dailyTarotSaves');
                    alert('Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');
                    window.location.reload();
                }
            };
            
            return (
                <div style={styles.content}>
                    <div style={{ textAlign: 'center', marginBottom: 'var(--space-xl)' }}>
                        <div style={{ fontSize: '2.5rem', marginBottom: 'var(--space-md)' }}>‚öôÔ∏è</div>
                        <h2 style={{ fontSize: '1.8rem', color: 'var(--text-primary)', marginBottom: 'var(--space-sm)' }}>
                            ÏÑ§Ï†ï
                        </h2>
                        <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem' }}>
                            Ïï± ÏÑ§Ï†ïÏùÑ Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî
                        </p>
                    </div>
                    
                    <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-md)' }}>
                        <div style={styles.card}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                                <div>
                                    <h3 style={{ fontSize: '1.1rem', color: 'var(--text-primary)', marginBottom: 'var(--space-xs)' }}>
                                        Ïñ∏Ïñ¥ ÏÑ§Ï†ï
                                    </h3>
                                    <p style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>
                                        ÌòÑÏû¨: {language === 'ko' ? 'ÌïúÍµ≠Ïñ¥' : 'English'}
                                    </p>
                                </div>
                                <button
                                    style={{
                                        ...styles.secondaryButton,
                                        width: 'auto',
                                        marginBottom: 0,
                                        padding: 'var(--space-sm) var(--space-md)',
                                    }}
                                    onClick={toggleLanguage}
                                >
                                    üåê {language === 'ko' ? 'English' : 'ÌïúÍµ≠Ïñ¥'}
                                </button>
                            </div>
                        </div>
                        
                        <div style={styles.card}>
                            <h3 style={{ fontSize: '1.1rem', color: 'var(--text-primary)', marginBottom: 'var(--space-md)' }}>
                                Ïï± Ï†ïÎ≥¥
                            </h3>
                            <div style={{ fontSize: '0.9rem', color: 'var(--text-secondary)', lineHeight: 1.6 }}>
                                <p><strong>Î≤ÑÏ†Ñ:</strong> 1.0.0</p>
                                <p><strong>Ï†úÏûë:</strong> therearenorules</p>
                                <p><strong>Í∏∞Îä•:</strong> ÌÉÄÎ°ú ÌÉÄÏù¥Î®∏, Ïä§ÌîÑÎ†àÎìú, ÏùºÍ∏∞</p>
                            </div>
                        </div>
                        
                        <div style={styles.card}>
                            <h3 style={{ fontSize: '1.1rem', color: 'var(--text-primary)', marginBottom: 'var(--space-md)' }}>
                                Îç∞Ïù¥ÌÑ∞ Í¥ÄÎ¶¨
                            </h3>
                            <button
                                style={{
                                    ...styles.secondaryButton,
                                    color: '#ff6b6b',
                                    borderColor: 'rgba(255, 107, 107, 0.3)',
                                }}
                                onClick={clearAllData}
                            >
                                üóëÔ∏è Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Main App Component
        const TarotTimerApp = () => {
            const [currentView, setCurrentView] = useState('timer');
            const [isLoading, setIsLoading] = useState(true);
            
            useEffect(() => {
                // Simulate loading
                const timer = setTimeout(() => setIsLoading(false), 2000);
                return () => clearTimeout(timer);
            }, []);
            
            if (isLoading) {
                return (
                    <div className="loading">
                        <div className="loading-spinner"></div>
                        <div>Ïã†ÎπÑÎ°úÏö¥ ÏóêÎÑàÏßÄÎ•º Î∂àÎü¨Ïò§Îäî Ï§ë...</div>
                    </div>
                );
            }
            
            const renderContent = () => {
                switch (currentView) {
                    case 'spreads': return <SpreadsScreen />;
                    case 'journal': return <JournalScreen />;
                    case 'settings': return <SettingsScreen />;
                    default: return <TimerScreen />;
                }
            };
            
            return (
                <div style={styles.app}>
                    {/* Header */}
                    <div style={styles.header}>
                        <div style={styles.crown}>üëë</div>
                        <h1 style={styles.title}>Tarot Timer</h1>
                        <p style={styles.subtitle}>Ïã†ÎπÑÎ°úÏö¥ ÌÉÄÎ°ú ÌÉÄÏù¥Î®∏</p>
                    </div>
                    
                    {/* Main Content */}
                    {renderContent()}
                    
                    {/* Bottom Navigation */}
                    <nav style={styles.bottomNav}>
                        <div style={styles.navContainer}>
                            {[
                                { id: 'timer', icon: '‚è∞', label: 'ÌÉÄÏù¥Î®∏' },
                                { id: 'spreads', icon: 'üîÆ', label: 'Ïä§ÌîÑÎ†àÎìú' },
                                { id: 'journal', icon: 'üìñ', label: 'Ï†ÄÎÑê' },
                                { id: 'settings', icon: '‚öôÔ∏è', label: 'ÏÑ§Ï†ï' }
                            ].map(item => (
                                <button
                                    key={item.id}
                                    style={{
                                        ...styles.navItem,
                                        ...(currentView === item.id ? styles.activeNav : {})
                                    }}
                                    onClick={() => setCurrentView(item.id)}
                                >
                                    <span style={styles.navIcon}>{item.icon}</span>
                                    {item.label}
                                </button>
                            ))}
                        </div>
                    </nav>
                </div>
            );
        };

        // App with Language Provider
        const App = () => (
            <LanguageProvider>
                <TarotTimerApp />
            </LanguageProvider>
        );

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('app'));
        root.render(<App />);

        console.log('üîÆ Complete Tarot Timer app with all Figma UI features loaded!');
        console.log('üìä Features included: 78-card deck, Premium spreads, Daily timer, Journal, Multi-language');
    </script>

    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                .then(function(registration) {
                    console.log('ServiceWorker registration successful');
                })
                .catch(function(error) {
                    console.log('ServiceWorker registration failed:', error);
                });
            });
        }
    </script>
</body>
</html>